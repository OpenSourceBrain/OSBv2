harness:
  subdomain: nwbexplorer
  service:
    auto: false
    port: 80
    name: proxy-public
  dependencies:
    hard:
      - jupyterhub
    git:
      - url: https://github.com/MetaCell/nwb-explorer.git
        branch_tag: development
  jupyterhub:
    args: ["--debug", "--ServerApp.default_url=/geppetto", "--library=nwb_explorer", "--ServerApp.root_dir=/opt/workspace"]
    applicationHook: "osb_jupyter.change_pod_manifest"
    extraConfig:
      timing: |
        c.Spawner.port = 8000
        c.Spawner.http_timeout = 300
        c.Spawner.start_timeout = 300
        c.JupyterHub.tornado_settings = { "headers": { "Content-Security-Policy": "frame-ancestors 'self' *.osb.local localhost:3000 *.opensourcebrain.org  *.metacell.us"}}
